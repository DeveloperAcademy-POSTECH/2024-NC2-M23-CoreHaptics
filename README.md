# 2024-NC2-M0-AugmentedReality
## ğŸ‘« Pair

| ì´ë¦„ | ì´ì§€(ì„ì´ì§€) | ë‰´ì¤€ì„±(ê¹€ì¤€ì„±) |
| ---- | ---- | ---- |
| **í”„ë¡œí•„ ì‚¬ì§„** | <a href="https://github.com/izzy0426"><img src="https://avatars.githubusercontent.com/u/167609354?v=4" width="160" height="160"></a>  | <a href="https://github.com/newJunsung"><img src="https://avatars.githubusercontent.com/u/107932188?v=4" width="160" height="160"></a> |
| **ì—­í• ** | ë””ìì¸ | í…Œí¬ |
| **GitHub** | [@ez](https://github.com/izzy0426) | [@newJunsung](https://github.com/newJunsung) |
## ğŸ¥ Youtube Link
(ì¶”í›„ ë§Œë“¤ì–´ì§„ ìœ íŠœë¸Œ ë§í¬ ì¶”ê°€)

## ğŸ’¡ About Core Haptics
(í•´ë‹¹ ê¸°ìˆ ì— ëŒ€í•œ ì¡°ì‚¬ ë‚´ìš© ì •ë¦¬)

- ì´ë²¤íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì˜¤ë””ì˜¤ / í–…í‹± ëœë”ë§ API
- ê¸°ë³¸ í–…í‹±ì´ ì—¬ëŸ¬ ì¸í„°í˜ì´ìŠ¤ ìš”ì†Œì— ìë™ìœ¼ë¡œ ë“¤ì–´ê°€ ìˆì§€ë§Œ, Core Haptics ë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ë³¸ì ì¸ íŒ¨í„´ì„ ë„˜ì–´ì„œ ì´‰ê°(ì§„ë™)ê³¼ ì†Œë¦¬ í”¼ë“œë°±ê³¼ ê°™ì€Â **í–…í‹±ì„ ì»¤ìŠ¤í…€**í•´ì„œ ê¸°ëŠ¥ì„ í™•ì¥í•  ìˆ˜ ìˆë‹¤.
- í–…í‹±ì„ ì¼ê´€ì„± ìˆê²Œ ì‚¬ìš©í•´ì•¼í•˜ë©°, ê³¼ë„í•œ ì‚¬ìš©ì€ ì§€ì–‘í•œë‹¤.
- ì‚¬ìš©ìì˜ ëª°ì…ë„ë¥¼ ë†’ì—¬ì¤€ë‹¤.
- ì§€ì›í•˜ëŠ” í•˜ë“œì›¨ì–´ ì¸ì§€ í™•ì¸ì´ í•„ìš”í•˜ë‹¤.

- **CoreHaptics**ì—ëŠ” ì†Œë¦¬ì™€ ì§„ë™ì„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆëŠ” ê²ƒì„ ì•Œê²Œ ë¨. 
- `CHHapticEngineì„` ì´ìš©í•´ì„œ ì†Œë¦¬ ë° ì§„ë™ì„ ê´€ë¦¬í•˜ëŠ” í•˜ë“œì›¨ì–´ë¥¼ ì œì–´í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë¨. 
- `CHHapticPattern` ì†Œë¦¬ ë° ì§„ë™ì— ëŒ€í•œ íŒ¨í„´ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë¨. 
- `CHHapticPatternPlayer`ì„ ì´ìš©í•˜ì—¬ í–…í‹±ì— ëŒ€í•œ íŒ¨í„´ì„ ì¬ìƒí•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë¨. 

## ğŸ¯ What we focus on?

ë³´ì¡°ì ì¸ ìˆ˜ë‹¨ì´ ì•„ë‹Œ í–…í‹± ìì²´ì—ì„œ ì¬ë¯¸ë¥¼ ì°¾ê³ ì í–ˆìŒ. **CoreHaptics**ì— ì§„ë™ê³¼ ì†Œë¦¬ ì¤‘, ì§„ë™ì— ì¤‘ì ì„ ë‘ê¸°ë¡œ í•¨. 
`CHHapticEventParameter`ì„ ì´ìš©í•˜ì—¬ íŠ¹ì • intensity, sharpness, durationì„ ê°€ì§„ ì§„ë™ ì´ë²¤íŠ¸ë¥¼ ë§Œë“¤ê³ , ì´ë¥¼ `CHHapticPatternPlayerë¡œ` ë§Œë“¤ê³  ì‹¤í–‰ì‹œí‚¤ê³ ì í•¨. 
ì‚¬ìš©ìê°€ ëœë¤í•œ(ë˜ëŠ” ìƒëŒ€ë°©ì´ ë§Œë“¤ì–´ë‚¸) ì§„ë™ì„ ë§ì¶”ë©° ì¬ë¯¸ë¥¼ ëŠë¼ê²Œ í•˜ê³ ì í•¨. 

## ğŸ’¼ Use Case
- CoreHaptics ê¸°ìˆ ì„ ì´ìš©í•˜ì—¬ ì‹¬ì‹¬í•  ë•Œ ì§„ë™ì„ ë§ˆìŒëŒ€ë¡œ ì¡°ì ˆí•˜ë©° ê°€ì§€ê³  ë†€ ìˆ˜ ìˆê²Œ í•˜ëŠ” ì•±

> ğŸ’¡ **ì ˆëŒ€ì§„ê°**

- ì„ì˜ë¡œ ì£¼ì–´ì§€ëŠ” ì§„ë™ì„ intensityì™€ sharpness, durationì˜ ì¡°ì •ì„ í†µí•´ ë§ì¶˜ë‹¤.
- intensityì™€ sharpness, durationì˜ ì¡°ì •ìœ¼ë¡œ ìƒˆë¡œìš´ ì§„ë™ì„ ë§Œë“¤ê³  ê³µìœ í•œë‹¤.
- ì¹œêµ¬ê°€ ê³µìœ í•œ ì§„ë™ì„ intensityì™€ sharpness, durationì˜ ì¡°ì •ìœ¼ë¡œ ë§ì¶˜ë‹¤.

## ğŸ–¼ï¸ Prototype
(í”„ë¡œí† íƒ€ì…ê³¼ ì„¤ëª… ì¶”ê°€)
![nc2 á„‘á…³á„…á…©á„á…©á„á…¡á„‹á…µá†¸](https://github.com/DeveloperAcademy-POSTECH/2024-NC2-M23-CoreHaptics/assets/107932188/f58471cf-4bb3-4130-a233-c8aae348eb00)
1. **1ì¸ ëª¨ë“œ**
    1. ì»´í“¨í„°ê°€ ëœë¤í•˜ê²Œ ì œê³µí•˜ëŠ” ì§„ë™ ë“£ê¸°
    2. ì‚¬ìš©ìê°€ ì»¤ìŠ¤í…€í•œ ì§„ë™ ë“£ê¸°
    3. Intensity, Sharpeness, Duration ì„¤ì •í•˜ê¸°
    4. ì»¤ìŠ¤í…€í•œ ì§„ë™ì„ ì œì¶œí•œ í›„ ê²°ê³¼ í™•ì¸í•˜ê¸°
    5. ì‹¤íŒ¨í•œ ê²½ìš° ì¬ì‹œë„í•˜ê¸°
2. **2ì¸ ëª¨ë“œ**
    1. í˜ì´ìŠ¤íƒ€ì„ì„ í†µí•´ SharePlay ì—°ê²°í•˜ê¸°
    2. Intensity, Sharpeness, Durationì„ ì¡°ì •í•˜ì—¬ ë‚˜ì˜ ì§„ë™ ì»¤ìŠ¤í…€í•˜ê¸°
    3. ë‚˜ì˜ ì§„ë™ì˜ ì´ë¦„ì„ ë°”ê¾¸ê³  ìƒëŒ€ì—ê²Œ ê³µìœ í•˜ê¸°
    4. ìƒëŒ€ê°€ ê³µìœ í•œ ì§„ë™ì„ ë°›ê³  ë“£ê¸°
    5. Intensity, Sharpeness, Durationì„ ì¡°ì •í•˜ì—¬ ìƒëŒ€ì˜ ì§„ë™ ë§ì¶”ê¸°
    6. ì»¤ìŠ¤í…€í•œ ì§„ë™ì„ ì œì¶œí•œ í›„ ê²°ê³¼ í™•ì¸í•˜ê¸°
    7. ì‹¤íŒ¨í•œ ê²½ìš° ì¬ì‹œë„í•˜ê¸°

## ğŸ› ï¸ About Code
- í–…í‹±ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” ê¸°ì¢… ë“±ì˜ ì´ìœ ë¡œ `HapticManager`ë¥¼ ë§Œë“¤ ìˆ˜ ì—†ëŠ” ìƒí™©ì´ ë˜ë©´, `nil`ì„ ë°˜í™˜í•˜ê²Œë” í•¨.
```swift
//  HapticManager.swift

init?() {
    do {
        let capablitity = CHHapticEngine.capabilitiesForHardware()
        
        if capablitity.supportsHaptics {
            let engine = try CHHapticEngine()
            self.engine = engine
            try engine.start()
            print("haptic manager return.")
        } else {
            print("haptic manager nil.")
            return nil
        }
    } catch {
        print(error)
        return nil
    }
}
```

- í”„ë¡œí† ì½œì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ì„œ ë‹¤ì–‘í•œ íƒ€ì…ì„ ë°›ì„ ìˆ˜ ìˆê²Œ í•¨. (ë¬¼ë¡ , í•´ë‹¹ í”„ë¡œí† ì½œì„ ì±„íƒí•´ì•¼ í•¨.)
```swift
//  HapticManager.swift

func haptic(
    type: CHHapticEvent.EventType,
    intensity: Float,
    sharpness: Float,
    duration: Float
) throws {
    stop()
    
    let eventParams = [
        CHHapticEventParameter(parameterID: .hapticIntensity, value: intensity),
        CHHapticEventParameter(parameterID: .hapticSharpness, value: sharpness)
    ]
    let event = CHHapticEvent(eventType: .hapticContinuous, parameters: eventParams, relativeTime: 0, duration: TimeInterval(duration))
    let pattern = try CHHapticPattern(events: [event], parameters: [])

    player = try engine.makePlayer(with: pattern)
    start()
}


func haptic(for param: HapticEventParameterable) throws {
    try haptic(
        type: .hapticContinuous,
        intensity: param.intensity, sharpness: param.sharpness,
        duration: param.duration
    )
}
```

### í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨
```mermaid
classDiagram

class ContentViewModel {
  + hapticsPublisher: AnyPublisher
  - bind()
  + onAppear()
  + playHaptic()
  + resetHaptic()
  + send()
  + startSharing()
  + checkSubmit()
  + changeMode()
}

class HapticManager {
  - engine: CHHapticEngine
  - player: CHHapticPatternPlayer?
  + haptic()
  + start()
  + stop()
}

class GameTogetherManager {
  + session: GroupSession?
  - messenger: GroupSessionMessenger?
  + hapticPublisher: AnyPublisher

  + startSharing()
  + setSessions()
  + send()
  - configureSession
  - handle()
}

ContentView --|> ContentViewModel
ContentViewModel --|> HapticManager
ContentViewModel --|> GameTogetherManager
```
